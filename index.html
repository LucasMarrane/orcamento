<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="utf-8" />
    <link href="dist/images/logo.svg" rel="shortcut icon" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description"
        content="Midone admin is super flexible, powerful, clean & modern responsive tailwind admin template with unlimited possibilities." />
    <meta name="keywords"
        content="admin template, Midone admin template, dashboard template, flat admin template, responsive admin template, web app" />
    <meta name="author" content="LEFT4CODE" />
    <title>Orçamentos</title>
    <!-- BEGIN: CSS Assets-->
    <link rel="stylesheet" href="dist/css/app.css" />
    <!-- END: CSS Assets-->
</head>
<!-- END: Head -->

<body class="app">
    <!-- BEGIN: Mobile Menu -->
    <div class="mobile-menu md:hidden">
        <div class="mobile-menu-bar">
            <a href="" class="flex mr-auto">
                <img alt="Midone Tailwind HTML Admin Template" class="w-6" src="dist/images/logo.svg" />
                <span class="xl:block text-white text-lg ml-3">
                    Marr<span class="font-black">Sys</span>
                </span>
            </a>
            <a href="javascript:;" id="mobile-menu-toggler">
                <i data-feather="bar-chart-2" class="w-8 h-8 text-white transform -rotate-90"></i>
            </a>
        </div>
        <ul class="border-t border-theme-24 py-5 hidden">
            <li>
                <a href="side-menu-dark-dashboard.html" class="menu menu--active">
                    <div class="menu__icon"><i data-feather="home"></i></div>
                    <div class="menu__title">Orçamento</div>
                </a>
            </li>
        </ul>
    </div>
    <!-- END: Mobile Menu -->
    <div class="flex">
        <!-- BEGIN: Side Menu -->
        <nav class="side-nav">
            <a href="" class="intro-x flex items-center pl-5 pt-4">
                <img alt="Midone Tailwind HTML Admin Template" class="w-6" src="dist/images/logo.svg" />
                <span class="hidden xl:block text-white text-lg ml-3">
                    Marr<span class="font-black">Sys</span>
                </span>
            </a>
            <div class="side-nav__devider my-6"></div>
            <ul>
                <li>
                    <a href="index.html" class="side-menu side-menu--active">
                        <div class="side-menu__icon"><i data-feather="home"></i></div>
                        <div class="side-menu__title">Orçamento</div>
                    </a>
                </li>
            </ul>
        </nav>
        <!-- END: Side Menu -->
        <!-- BEGIN: Content -->
        <div class="content">
            <!-- BEGIN: Top Bar -->
            <div class="top-bar">
                <!-- BEGIN: Breadcrumb -->
                <div class="-intro-x breadcrumb mr-auto hidden sm:flex">
                    <a href="" class="">App</a>
                    <i data-feather="chevron-right" class="breadcrumb__icon"></i>
                    <a href="" class="breadcrumb--active">Orçamento</a>
                </div>
            </div>
            <!-- END: Top Bar -->
            <div class="grid grid-cols-12 gap-6">
                <div class="col-span-12 xxl:col-span-9 grid grid-cols-12 gap-6">
                    <!-- BEGIN: General Report -->
                    <div class="col-span-12 mt-8">
                        <div class="intro-y flex items-center h-10">
                            <h2 class="text-lg font-medium truncate mr-5">Orçamento</h2>
                        </div>
                        <form id="form-gerar">
                            <div class="grid grid-cols-12 gap-6 mt-5">
                                <div class="intro-y col-span-12 lg:col-span-12">
                                    <!-- BEGIN: Input -->
                                    <div class="intro-y box">
                                        <div
                                            class="flex flex-col sm:flex-row items-center p-5 border-b border-gray-200 dark:border-dark-5">
                                            <h2 class="font-medium text-base mr-auto">Dados</h2>
                                        </div>
                                        <div class="p-5" id="inline-form">
                                            <div class="preview">
                                                <div class="grid grid-cols-3 gap-2">
                                                    <div class="mt-3">
                                                        <label>Altura</label>
                                                        <div class="relative mt-2">
                                                            <div
                                                                class="absolute rounded-l w-10 h-full flex items-center justify-center bg-gray-100 dark:bg-dark-1 dark:border-dark-4 border text-gray-600">
                                                                cm
                                                            </div>
                                                            <input type="text" name="altura"
                                                                class="input pl-12 w-full border col-span-4" id="altura"
                                                                placeholder="Altura" value="4"
                                                                style="text-align: end;" />
                                                        </div>
                                                        <div class="text-xs text-gray-600 mt-2">
                                                            Caso a altura não seja especificada, será levada
                                                            em consideração o valor da Largura como o valor
                                                            da Largura tambem.
                                                        </div>
                                                    </div>
                                                    <div class="mt-3">
                                                        <label>Largura (opcional)</label>
                                                        <div class="relative mt-2">
                                                            <div
                                                                class="absolute rounded-l w-10 h-full flex items-center justify-center bg-gray-100 dark:bg-dark-1 dark:border-dark-4 border text-gray-600">
                                                                cm
                                                            </div>
                                                            <input type="text" name="largura"
                                                                class="input pl-12 w-full border col-span-4"
                                                                id="largura" placeholder="Largura" value="4"
                                                                style="text-align: end;" />
                                                        </div>
                                                        <div class="text-xs text-gray-600 mt-2">
                                                            Caso a largura não seja especificada, será
                                                            levada em consideração o valor da Altura como o
                                                            valor da Largura tambem.
                                                        </div>
                                                    </div>
                                                    <div class="mt-3">
                                                        <label>Quantidade (opcional)</label>
                                                        <input type="text" class="input w-full border mt-2"
                                                            id="quantidade" placeholder="Quantidade " value="1"
                                                            name="quantidade" , style="text-align: end;" />
                                                        <div class="text-xs text-gray-600 mt-2">
                                                            Caso a quantidade não for especificada, o valor
                                                            padrão será 1.
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="accordion" style="margin-top: 10px; margin-bottom: 10px">
                                                <div
                                                    class="accordion__pane border-b border-gray-200 dark:border-dark-5 pb-4">
                                                    <a href="javascript:;"
                                                        class="accordion__pane__toggle font-medium block">Opções</a>
                                                    <div
                                                        class="accordion__pane__content mt-3 text-gray-700 dark:text-gray-600 leading-relaxed">
                                                        <div class="grid grid-cols-3 gap-2">
                                                            <div>
                                                                <label>Papel</label>
                                                                <div class="mt-2">
                                                                    <select data-search="true" id="papel"
                                                                        class="tail-select w-full">
                                                                        <option value="A0">A0</option>
                                                                        <option value="A1">A1</option>
                                                                        <option value="A2">A2</option>
                                                                        <option value="A3">A3</option>
                                                                        <option value="A4" selected>A4</option>
                                                                        <option value="A5">A5</option>
                                                                        <option value="A6">A6</option>
                                                                        <option value="A7">A7</option>
                                                                    </select>
                                                                </div>
                                                                <div class="text-xs text-gray-600 mt-2">
                                                                    A medida Padrão será do Papel A4, consulte a
                                                                    disponibilidade do papel.
                                                                </div>
                                                            </div>
                                                            <div>
                                                                <label>Margem para Sangria do Papel</label>
                                                                <div class="relative mt-2">
                                                                    <div
                                                                        class="absolute rounded-l w-10 h-full flex items-center justify-center bg-gray-100 dark:bg-dark-1 dark:border-dark-4 border text-gray-600">
                                                                        cm
                                                                    </div>
                                                                    <input type="text" name="sangria"
                                                                        class="input pl-12 w-full border col-span-4"
                                                                        placeholder="Sangria" id="sangria" value="1"
                                                                        style="text-align: end;" />
                                                                </div>
                                                                <div class="text-xs text-gray-600 mt-2">
                                                                    O Valor padrão será de 1CM de margem
                                                                </div>
                                                            </div>
                                                            <div>
                                                                <label>Valor por Folha</label>
                                                                <div class="relative mt-2">
                                                                    <div
                                                                        class="absolute rounded-l w-10 h-full flex items-center justify-center bg-gray-100 dark:bg-dark-1 dark:border-dark-4 border text-gray-600">
                                                                        R$
                                                                    </div>
                                                                    <input name="valor" type="text"
                                                                        class="input pl-12 w-full border col-span-4"
                                                                        id="valor" placeholder="Preço" value="7,50"
                                                                        style="text-align: end;" />
                                                                </div>
                                                                <div class="text-xs text-gray-600 mt-2">
                                                                    O Valor padrão será de R$7,00 , (para
                                                                    Usuarios Finais o orçamento poderá ser
                                                                    refeito)
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="grid grid-cols-2 gap-2">
                                                <div>
                                                    <div>
                                                        <label>Tipo</label>
                                                        <div class="flex flex-col sm:flex-row mt-2">
                                                            <div
                                                                class="flex items-center text-gray-700 dark:text-gray-500 mr-2">
                                                                <input type="radio" class="input border mr-2"
                                                                    id="recortado" name="tipo" value="0" />
                                                                <label class="cursor-pointer select-none"
                                                                    for="recortado">Recortar</label>
                                                            </div>
                                                            <div
                                                                class="flex items-center text-gray-700 dark:text-gray-500 mr-2 mt-2 sm:mt-0">
                                                                <input type="radio" class="input border mr-2"
                                                                    id="semcorte" name="tipo" value="1" checked />
                                                                <label class="cursor-pointer select-none"
                                                                    for="semcorte">Sem Recortar</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div>
                                                    <div class="flex items-end" style="flex-direction: column">
                                                        <label style="color: transparent">Gerar</label>
                                                        <button class="button bg-theme-9 text-white" id="gerar">
                                                            Gerar Orçamento
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div>
                            <div class="grid grid-cols-12 gap-6 mt-5" id="render">
                                                             
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
        <!-- END: Content -->
    </div>
    <script src="dist/js/app.js"></script>
    <script src="dist/js/orcamento.js"></script>
    <script>
        let form = document.querySelectorAll("input[name]");
        let icon = { 
            file : `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text report-box__icon text-theme-9"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>`,
            cart : `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather feather-shopping-cart report-box__icon text-theme-10"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>`,
            image: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather feather-image report-box__icon text-theme-8"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>`,
        }

        function gerar(e) {
            e.preventDefault();
            let data = {};



            let select = document.querySelector("#papel").value;
            data["papel"] = select

            for (let item of form) {
                if (item.getAttribute("name") != "tipo")
                    data[item.getAttribute("name")] = item.value

                else if (item.checked == true)
                    data[item.getAttribute("name")] = item.value
            }


            if (data["altura"])
                data["altura"] = Number.parseFloat(data["altura"].replace(",", "."))

            if (data["largura"])
                data["largura"] = Number.parseFloat(data["largura"].replace(",", "."))

            if (data["valor"])
                data["valor"] = Number.parseFloat(data["valor"].replace(",", "."))

            if (data["sangria"])
                data["sangria"] = Number.parseFloat(data["sangria"].replace(",", "."))

            if (data["quantidade"])
                data["quantidade"] = Number.parseFloat(data["quantidade"].replace(",", "."))

            if (data["tipo"] && Number.parseInt(data["tipo"]) == 0) {
                data.valor += 5;
            }

            var orcamento = new Orcamento({altura: data.altura,largura: data.largura }, data.papel, data.quantidade, data.valor) 

            let render = document.querySelector("#render")
            render.innerHTML = renderInfo(icon.cart,orcamento.valor(0), "Valor Total Aproximado")
            render.innerHTML += renderInfo(icon.file,orcamento.quantidadeDePaginasArredondadas(0), "Quantidade de Papel Gasto ", false)
            render.innerHTML += renderInfo(icon.image,orcamento.quantidadePorPagina().portrait, "Adesivos por Pagina - Retrato", false)  
            render.innerHTML += renderInfo(icon.cart,orcamento.valorUnitario(0), "Valor da Unidade")         
            

        }


        function renderInfo(ico, valor, descricao, ehMoeda=true){
            if(ehMoeda)
            valor = Intl.NumberFormat("pt-BR",{style: "currency",currency: "BRL"}).format(valor)
            let text = ` <div class="col-span-12 sm:col-span-6 xl:col-span-3 intro-y">
                                    <div class="report-box zoom-in">
                                        <div class="box p-5">
                                            <div class="flex">
                                                ${ico}
                                            </div>
                                            <div class="text-3xl font-bold leading-8 mt-6">${valor}</div>
                                            <div class="text-base text-gray-600 mt-1">${descricao}</div>
                                        </div>
                                    </div>
                                </div> `;
                                return text;
        }



        document.querySelector("#gerar").addEventListener("click", gerar);
    </script>
    <!-- END: JS Assets-->
</body>

</html>